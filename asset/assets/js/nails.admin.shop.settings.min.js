var NAILS_Admin_Shop_Settings;NAILS_Admin_Shop_Settings=function(){return this.__construct=function(){this._init_sortable(),this._init_delete(),this._init_adds(),this._init_submits(),this._init_warehouse_collection(),this._init_skins(),this._init_payment_gateways(),this._init_shipping(),$("select.select2-base").select2({formatNoMatches:"Ensure currency is active. No currencies match"})},this._init_sortable=function(){var t=this;$("#existing-shipping-methods tbody").sortable({handle:"td:first",stop:function(){t._set_order_ship()}})},this._init_delete=function(){$(document).on("click","a.delete-row",function(){var t=$(this);return $("<div>").text("Are you sure you wish to delete this item?").dialog({title:"Confirm Delete",resizable:!1,draggable:!1,modal:!0,dialogClass:"no-close",buttons:{Delete:function(){t.closest("tr").remove(),$(this).dialog("close"),$("<div>").text("The item was removed from the interface and will be deleted when you save changes.").dialog({title:"Remember to Save Changes!",resizable:!1,draggable:!1,modal:!0,buttons:{Ok:function(){$(this).dialog("close")}}})},Cancel:function(){$(this).dialog("close")}}}),!1})},this._init_adds=function(){var t=this;$("#add-new-shipping").on("click",function(){var e=$("#existing-shipping-methods tbody tr").length+1,i=Mustache.render($("#template-new-shipping").html(),{counter:e});return $("#existing-shipping-methods tbody").append(i),$("#existing-shipping-methods tbody").sortable("refresh"),$("td.tax_rate select.select2").select2(),t._set_order_ship(),!1}),$("#add-new-tax-rate").on("click",function(){var t=$("#existing-tax-rates tbody tr").length+1,e=Mustache.render($("#template-new-tax-rate").html(),{counter:t});return $("#existing-tax-rates tbody").append(e),!1})},this._init_warehouse_collection=function(){$("#shop-settings-warehouse-collection .toggle").on("toggle",function(t,e){e?($("#warehouse-collection-address").show(),_nails.add_stripes()):$("#warehouse-collection-address").hide()})},this._set_order_ship=function(){var t=0;$("#existing-shipping-methods .order-handle input.order").each(function(){$(this).val(t),t++})},this._init_submits=function(){$("#form-shipping-methods").on("submit",function(){var t=0,e;return $(this).find("tbody tr").each(function(){e=$(this).find("td.courier input").val(),e.length?$(this).find("td.courier").removeClass("error"):($(this).find("td.courier").addClass("error"),t++),e=$(this).find("td.method input").val(),e.length?$(this).find("td.method").removeClass("error"):($(this).find("td.method").addClass("error"),t++),e=parseInt($(this).find("td.default_price input").val(),10),0>e?($(this).find("td.default_price").addClass("error"),t++):$(this).find("td.default_price").removeClass("error"),e=parseInt($(this).find("td.default_price_additional input").val(),10),0>e?($(this).find("td.default_price_additional").addClass("error"),t++):$(this).find("td.default_price_additional").removeClass("error")}),t?(alert("Please check highlighted fields for errors:\n\n- A courier must be provided\n- A method must be provided\n- Price and 1+ Price must be positive"),!1):!0}),$("#form-tax-rates").on("submit",function(){var t=0,e;return $(this).find("tbody tr").each(function(){e=$(this).find("td.label input").val(),e.length?$(this).find("td.label").removeClass("error"):($(this).find("td.label").addClass("error"),t++),e=parseInt($(this).find("td.rate input").val(),10),isNaN(e)||e>1||0>e?($(this).find("td.rate").addClass("error"),t++):$(this).find("td.rate").removeClass("error")}),t?(alert("Please check highlighted fields for errors:\n\n- A label must be provided\n- Rate must be a numeric in the range 0-1"),!1):!0})},this._init_skins=function(){$("ul.skins li.skin").on("click",function(){$("ul.skins li.skin").removeClass("selected"),$(this).addClass("selected"),$(this).find("input[type=radio]").prop("checked",!0)})},this._init_shipping=function(){$("#shipping-modules .enabled").each(function(){var t=$(this).find(".toggle"),e=$(this).find("input[type=checkbox]");t.css({width:"100px",height:"30px"}),t.toggles({checkbox:e,on:e.is(":checked")})})},this._init_payment_gateways=function(){$("#payment-gateways .enabled").each(function(){var t=$(this).find(".toggle"),e=$(this).find("input[type=checkbox]");t.css({width:"100px",height:"30px"}),t.toggles({checkbox:e,on:e.is(":checked")})})},this.__construct()};
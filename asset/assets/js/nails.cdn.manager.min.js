var NAILS_CDN_Manager;NAILS_CDN_Manager=function(e,t,n,i,a,c){var o=this;return o.handler=e,o.callback=t,o.passback=n,o.urlSchemes=i,o.isFancybox=a,o.reopenFancybox=c,o.__construct=function(){o.initSubmit(),o.initAlerts(),o.initUpload(),o.initDelete(),o.initInsert(),o.insertSearch();var e=!1;if("ckeditor"===o.handler)e=!0;else if(o.isFancybox)try{e="function"==typeof window.parent[o.callback[0]][o.callback[1]]?!0:!1}catch(t){e=!1}else if(window.opener)try{e="function"==typeof window.opener[o.callback[0]][o.callback[1]]?!0:!1}catch(t){e=!1}else e=!1;e||$("a.insert").remove(),$("a.cdn-fancybox").fancybox({padding:0,wrapCSS:"cdn-fancybox",helpers:{title:{type:"over"}}})},o.initSubmit=function(){$("form").on("submit",function(){o.showMask()})},o.initAlerts=function(){$(".system-alert .awesome").on("click",function(){return o.hideAlert(),!1}),$(document).on("keydown",function(e){13===e.keyCode&&$("#alert:visible").length>0&&$("#alert .awesome.ok").first().click(),27===e.keyCode&&$("#alert:visible").length>0&&$("#alert .awesome.cancel").first().click()})},o.initUpload=function(){},o.initDelete=function(){$("a.delete").on("click",function(){var e,t;return e=$(this),t="<p>",t+="Any resources which are using this object will have the reference removed.",t+="</p>",t+="<p>",t+="Continue?",t+="</p>",$("<div>").html(t).dialog({title:"Are you sure?",resizable:!1,draggable:!1,modal:!0,dialogClass:"no-close",buttons:{Delete:function(){window.location.href=e.attr("href")},Cancel:function(){$(this).dialog("close")}}}),!1})},o.initInsert=function(){$("a.insert").on("click",function(){var e=$(this).attr("data-file"),t=$(this).attr("data-id"),n=$(this).attr("data-bucket");return"ckeditor"===o.handler?o.insertCkeditor(n,e,t):o.insertNative(n,e,t),o.isFancybox?parent.$.fancybox.close():window.close(),!1})},o.insertCkeditor=function(e,t,n){var i=this.urlSchemes.serve,a=t.split("."),c={bucket:e,filename:a[0],extension:"."+a[1],id:n,width:0,height:0,sex:"",border:0},o=Mustache.render(i,c);window.opener.CKEDITOR.tools.callFunction(this.callback,o)},o.insertNative=function(e,t,n){this.isFancybox?window.parent[this.callback[0]][this.callback[1]].call(null,e,t,n,this.reopenFancybox,o.passback):window.opener[this.callback[0]][this.callback[1]].call(null,e,t,n,this.reopenFancybox,o.passback)},o.insertSearch=function(){$("#search-text").on("keyup",function(){return o.doSearch($(this).val()),!1})},o.doSearch=function(e){$("li.file,tr.file:not(.head)").each(function(){var t=new RegExp(e,"gi");t.test($(this).attr("data-title"))?$(this).show():$(this).hide()})},o.showMask=function(){$("#mask").show()},o.hideMask=function(){$("#mask").hide()},o.showAlert=function(){$("#alert").show()},o.hideAlert=function(){$("#alert").hide()},o.__construct()};
//# sourceMappingURL=./nails.cdn.manager.min.js.map
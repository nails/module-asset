var NAILS_CDN_Manager;NAILS_CDN_Manager=function(){this.handler="",this.callback="",this.url_schemes={},this.isFancybox="",this.reopen_fancybox="",this._api=null,this.init=function(i,t,e,n,s){this.handler=i,this.callback=t,this.url_schemes=e,this.isFancybox=n,this.reopen_fancybox=s,this._api=new window.NAILS_API,this._init_submit(),this._init_alerts(),this._init_upload(),this._init_delete(),this._init_insert(),this._init_search();var a=!1;a="ckeditor"===this.handler?!0:this.isFancybox?"function"==typeof window.parent._nails_forms[this.callback]?!0:!1:window.opener&&"function"==typeof window.opener._nails_forms[this.callback]?!0:!1,a||$("a.insert").remove(),$("a.cdn-fancybox").fancybox({padding:0,wrapCSS:"cdn-fancybox",helpers:{title:{type:"over"}}})},this._init_submit=function(){var i=this;$("form").on("submit",function(){i._show_mask()})},this._init_alerts=function(){var i=this;$(".system-alert .awesome").on("click",function(){return i._hide_alert(),!1}),$(document).on("keydown",function(i){13===i.keyCode&&$("#alert:visible").length>0&&$("#alert .awesome.ok").first().click(),27===i.keyCode&&$("#alert:visible").length>0&&$("#alert .awesome.cancel").first().click()})},this._init_upload=function(){},this._init_delete=function(){$("a.delete").on("click",function(){var i=$(this);return $("<div>").html("<p>Any resources which are using this object will have the reference removed.</p><p>Continue?</p>").dialog({title:"Are you sure?",resizable:!1,draggable:!1,modal:!0,dialogClass:"no-close",buttons:{Delete:function(){window.location.href=i.attr("href")},Cancel:function(){$(this).dialog("close")}}}),!1})},this._init_insert=function(){var i=this;$("a.insert").on("click",function(){var t=$(this).attr("data-file"),e=$(this).attr("data-id"),n=$(this).attr("data-fieldid"),s=$(this).attr("data-bucket");return"ckeditor"===i.handler?i._insert_ckeditor(s,t,e):i._insert_native(t,e,n),i.isFancybox?parent.$.fancybox.close():window.close(),!1})},this._insert_ckeditor=function(i,t,e){var n=this.url_schemes.serve,s=t.split("."),a={bucket:i,filename:s[0],extension:"."+s[1],id:e,width:0,height:0,sex:"",border:0},o=Mustache.render(n,a);window.opener.CKEDITOR.tools.callFunction(this.callback,o)},this._insert_native=function(i,t,e){this.isFancybox?window.parent._nails_forms[this.callback].call(null,i,t,this.reopen_fancybox,e):window.opener._nails_forms[this.callback].call(null,i,t,this.reopen_fancybox,e)},this._init_search=function(){var i=this;$("#search-text").on("keyup",function(){return i._do_search($(this).val()),!1})},this._do_search=function(i){$("li.file,tr.file:not(.head)").each(function(){var t=new RegExp(i,"gi");t.test($(this).attr("data-title"))?$(this).show():$(this).hide()})},this._show_mask=function(){$("#mask").show()},this._hide_mask=function(){$("#mask").hide()},this._show_alert=function(){$("#alert").show()},this._hide_alert=function(){$("#alert").hide()}};
//# sourceMappingURL=./nails.cdn.manager.min.js.map
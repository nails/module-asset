var NAILS_CDN_Manager;NAILS_CDN_Manager=function(e,t,i,n,a,o){var c=this;return c.handler=e,c.callback=t,c.passback=i,c.urlSchemes=n,c.isModal=a,c.reopenFancybox=o,c.__construct=function(){c.initSubmit(),c.initAlerts(),c.initUpload(),c.initDelete(),c.initInsert(),c.insertSearch();var e=!1;if("ckeditor"===c.handler)e=!0;else if(c.isModal)try{e="function"==typeof window.parent[c.callback[0]][c.callback[1]]?!0:!1}catch(t){e=!1}else if(window.opener)try{e="function"==typeof window.opener[c.callback[0]][c.callback[1]]?!0:!1}catch(t){e=!1}else e=!1;e||$("a.insert").remove(),$("a.cdn-fancybox").fancybox({padding:0,wrapCSS:"cdn-fancybox",helpers:{title:{type:"over"}}})},c.initSubmit=function(){$("form").on("submit",function(){c.showMask()})},c.initAlerts=function(){$(".system-alert .awesome").on("click",function(){return c.hideAlert(),!1}),$(document).on("keydown",function(e){13===e.keyCode&&$("#alert:visible").length>0&&$("#alert .awesome.ok").first().click(),27===e.keyCode&&$("#alert:visible").length>0&&$("#alert .awesome.cancel").first().click()})},c.initUpload=function(){},c.initDelete=function(){$("a.delete").on("click",function(){var e,t;return e=$(this),t="<p>",t+="Any resources which are using this object will have the reference removed.",t+="</p>",t+="<p>",t+="Continue?",t+="</p>",$("<div>").html(t).dialog({title:"Are you sure?",resizable:!1,draggable:!1,modal:!0,dialogClass:"no-close",buttons:{Delete:function(){window.location.href=e.attr("href")},Cancel:function(){$(this).dialog("close")}}}),!1})},c.initInsert=function(){$("a.insert").on("click",function(){var e=$(this).attr("data-file"),t=$(this).attr("data-id"),i=$(this).attr("data-bucket");return"ckeditor"===c.handler?c.insertCkeditor(i,e,t):c.insertNative(i,e,t),c.isModal?parent.$.fancybox.close():window.close(),!1})},c.insertCkeditor=function(e,t,i){var n=this.urlSchemes.serve,a=t.split("."),o={bucket:e,filename:a[0],extension:"."+a[1],id:i,width:0,height:0,sex:"",border:0},c=Mustache.render(n,o);window.opener.CKEDITOR.tools.callFunction(this.callback,c)},c.insertNative=function(e,t,i){this.isModal?window.parent[this.callback[0]][this.callback[1]].call(null,e,t,i,this.reopenFancybox,c.passback):window.opener[this.callback[0]][this.callback[1]].call(null,e,t,i,this.reopenFancybox,c.passback)},c.insertSearch=function(){$("#search-text").on("keyup",function(){return c.doSearch($(this).val()),!1})},c.doSearch=function(e){$("li.file,tr.file:not(.head)").each(function(){var t=new RegExp(e,"gi");t.test($(this).attr("data-title"))?$(this).show():$(this).hide()})},c.showMask=function(){$("#mask").show()},c.hideMask=function(){$("#mask").hide()},c.showAlert=function(){$("#alert").show()},c.hideAlert=function(){$("#alert").hide()},c.__construct()};
//# sourceMappingURL=./nails.cdn.manager.min.js.map
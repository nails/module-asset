var NAILS_Admin_CMS_Blocks_Edit;NAILS_Admin_CMS_Blocks_Edit=function(){var t=this;return t.newCounter=0,t.blockType="plaintext",t.__construct=function(n){t.blockType=n,t._init_new_translation(),t._init_del_translation(),t._init_toggle_revision(),t._init_form_validation(),$(document).on("change",".translation select",function(){return t._lang_change($(this)),!1})},t._init_new_translation=function(){$("#new-translation").on("click",function(){return t._add_translation(),!1})},t._add_translation=function(){var n={new_count:t.newCounter},e=$("#template-translation").html(),a=$("<fieldset>").addClass("translation");a.html(Mustache.render(e,n)),a.attr("data-translation_id",t.newCounter).find("select").prepend($("<option>").attr({value:"",selected:"selected","class":"please-choose",disabled:"disabled"}).text("Please Choose Language...")),$(".translation").last().after(a),t._lang_disable(),"richtext"===t.blockType&&CKEDITOR.replace("translation_"+t.newCounter,{customConfig:window.NAILS.URL+"js/ckeditor.config.default.min.js"}),t.newCounter++},t._init_del_translation=function(){$(document).on("click","a.remove-translation",function(){return t._del_translation($(this)),!1})},t._del_translation=function(n){if("richtext"===t.blockType){var e;e=n.closest("fieldset").attr("data-translation_id"),e="translation_"+e,CKEDITOR.instances[e].destroy()}n.closest("fieldset").remove()},t._lang_change=function(n){n.closest("fieldset").attr("data-language",n.val()),t._lang_disable()},t._lang_disable=function(){$(".translation option[disabled=disabled]:not(.please-choose)").removeAttr("disabled"),$(".translation").each(function(){$(".translation option[value="+$(this).attr("data-language")+"]").attr("disabled","disabled"),$("option[value="+$(this).attr("data-language")+"]",this).removeAttr("disabled")}),$(".translation option[selected=selected]:not(.please-choose)").removeAttr("disabled")},t._init_toggle_revision=function(){$("a.toggle-revisions").on("click",function(){return t._toggle_revision($(this)),!1})},t._toggle_revision=function(t){t.closest(".revisions").toggleClass("show")},t._init_form_validation=function(){$("form").on("submit",function(){return t._form_validation()})},t._form_validation=function(){var t=0;if($("fieldset.translation").each(function(){var n;n=$("select",this).length?$("select",this).val():!0;var e=$("textarea",this).val();n&&e?$(".system-alert",this).hide():(t++,$(".system-alert",this).show())}),t){var n=$("div.system-alert.error:visible").get(0);return $.scrollTo(n,"fast",{axis:"y",offset:{top:-50}}),!1}return!0},t.__construct()}();
//# sourceMappingURL=./nails.admin.cms.blocks.edit.min.js.map
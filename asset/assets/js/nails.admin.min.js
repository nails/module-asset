if("undefined"==typeof console){var console;console={log:function(){},debug:function(){},info:function(){},warn:function(){},error:function(){}}}var NAILS_Admin;NAILS_Admin=function(){var t=this;return t.__construct=function(){t.initBoxes(),t.initNavSearch(),t.initNavReset(),t.initSearchBoxes(),t.initMobileMenu(),t.initToggles(),t.initCkeditor(),t.initSelect2(),t.initNiceTime(),t.initSystemAlerts()},t.initBoxes=function(){$(".box .toggle").on("click",function(){return $(this).parents(".box").hasClass("open")?t.closeBox(this,!0):t.openBox(this,!0),t.saveNav(),!1});var i,e,o,n;$("ul.modules li.module").each(function(){i=$(this).data("initial-state"),e=$(this).find(".toggle"),n=$(this).find(".box-container"),o=n.outerHeight(),e.attr("data-height",o),"open"===i?t.openBox(e,!1):t.closeBox(e,!1)}),$("ul.modules").sortable({axis:"y",placeholder:"sort-placeholder",items:"li.module.sortable",handle:".handle",start:function(t,i){i.placeholder.height(i.helper.outerHeight())},stop:function(){t.saveNav()}})},t.saveNav=function(){var t,i,e;t={},$("ul.modules li.module").each(function(){e=$(".box",this).hasClass("open"),t[$(this).data("grouping")]={open:e}}),i={controller:"admin",method:"nav/save",action:"GET",data:{preferences:t}},_nails_api.call(i)},t.openBox=function(t,i){var e,o;e=$(t).parents(".box").attr("id"),$(t).parents(".box").removeClass("closed"),$(t).parents(".box").addClass("open"),o=$(t).attr("data-height"),i?$(t).parents(".box").find(".box-container").stop().animate({height:o}):$(t).parents(".box").find(".box-container").height(o)},t.closeBox=function(t,i){var e;e=$(t).parents(".box").attr("id"),$(t).parents(".box").removeClass("open"),$(t).parents(".box").addClass("closed"),i?$(t).parents(".box").find(".box-container").stop().animate({height:0}):$(t).parents(".box").find(".box-container").height(0)},t.initNavSearch=function(){$(".nav-search input").on("keyup",function(){var i=$(this).val();i.length?($(".box .toggle").hide(),$(".box li").each(function(){var t=new RegExp(i,"gi");t.test($(this).text())?$(this).show():$(this).hide();var e=$(this).parents(".box").find("ul").outerHeight();$(this).parents(".box").find(".box-container").height(e),$(this).parents(".box").stop().css($(this).parents(".box").find("li:visible").length?{opacity:1}:{opacity:.25})})):($(".box").stop().animate({opacity:1},"fast"),$(".box li").each(function(){$(this).show()}),$(".box .toggle").each(function(){$(this).show();var i=$(this).closest(".box").hasClass("closed");i?t.openBox(this,!1):t.closeBox(this,!1)}))})},t.initNavReset=function(){$("#admin-nav-reset a").on("click",function(){var t={controller:"admin",method:"nav/reset",action:"POST"};return _nails_api.call(t),$("<div>").html("<p>Your navigation has been reset, changes will take hold on the next page load.</p>").dialog({title:"Reset Complete",resizable:!1,draggable:!1,modal:!0,dialogClass:"no-close",buttons:{OK:function(){$(this).dialog("close")},Reload:function(){window.location.reload()}}}).show(),!1})},t.initSearchBoxes=function(){$("div.search select, div.search input[type=checkbox]").on("change",function(){$(this).closest("form").submit()}),$("div.search form").on("submit",function(){$(this).closest("div.search").find("div.mask").show()})},t.initMobileMenu=function(){$("#mobileMenuBurger").on("click",function(){var t=$(window).height()-150;return $("#mobileMenu").toggleClass("open"),$("#mobileMenu").hasClass("open")?$("#mobileMenu").css("max-height",t+"px"):$("#mobileMenu").css("max-height","0px"),!1})},t.initToggles=function(){$.fn.toggles?$(".field.boolean:not(.toggled)").each(function(){var t=$(this).find("input[type=checkbox]"),i=$(this).hasClass("readonly"),e=$(this).data("text-on")?$(this).data("text-on"):"ON",o=$(this).data("text-off")?$(this).data("text-off"):"OFF";$(this).find(".toggle").css({width:"100px",height:"30px"}).toggles({checkbox:t,click:!i,drag:!i,clicker:t,on:t.is(":checked"),text:{on:e,off:o}}),$(this).addClass("toggled"),t.hide()}):t.error("NAILS_ADMIN_JS: jQuery Toggles not available.")},t.initCkeditor=function(){if($.fn.ckeditor){var i=window.NAILS.URL+"js/ckeditor.config.basic.min.js",e=window.NAILS.URL+"js/ckeditor.config.default.min.js",o=window.SITE_URL+"assets/js/nails.admin.ckeditor.config.basic.min.js",n=window.SITE_URL+"assets/js/nails.admin.ckeditor.config.default.min.js";$.ajax({url:o,type:"HEAD",success:function(){$(".wysiwyg.wysiwyg-basic").ckeditor({customConfig:o})},error:function(){$(".wysiwyg.wysiwyg-basic").ckeditor({customConfig:i})}}),$.ajax({url:n,type:"HEAD",success:function(){$(".wysiwyg:not(.wysiwyg-basic)").ckeditor({customConfig:n})},error:function(){$(".wysiwyg:not(.wysiwyg-basic)").ckeditor({customConfig:e})}})}else t.error("NAILS_ADMIN_JS: CKEditor not available.")},t.initSelect2=function(){$.fn.select2?$("select.select2:not(.select2-offscreen)").select2():this.error("NAILS_JS: Select2 not available.")},t.initNiceTime=function(){var i=$(".nice-time:not(.nice-timed)");i.each(function(){var t=$(this).text(),i=/^\d\d\d\d-\d\d?-\d\d?(\d\d?\:\d\d?\:\d\d?)?$/;if(i.test(t)){var e=t.split(" ");if(e[1]||(e[1]="00:00:00"),e[0]){var o=e[0].split("-"),n=e[1].split(":"),a=o[0],s=o[1],c=o[2],r=n[0],l=n[1],d=n[2],h=new Date(a,s,c,r,l,d);isNaN(h.getTime())||($(this).addClass("nice-timed"),$(this).attr("data-time",t),$(this).attr("data-year",a),$(this).attr("data-month",s),$(this).attr("data-day",c),$(this).attr("data-hour",r),$(this).attr("data-minute",l),$(this).attr("data-second",d),$(this).attr("title",t))}}}),$(".nice-timed").each(function(){var i=$(this).attr("data-year"),e=$(this).attr("data-month")-1,o=$(this).attr("data-day"),n=$(this).attr("data-hour"),a=$(this).attr("data-minute"),s=$(this).attr("data-second"),c=new Date(i,e,o,n,a,s),r=new Date,l="",d=Math.ceil((r.getTime()-c.getTime())/1e3);d>=0&&10>d?l="a moment ago":d>=10?l=t.initNiceTimeCalc(d)+" ago":0>d&&(l=t.initNiceTimeCalc(d)+" from now"),"1 day ago"===l?l="yesterday":"1 day from now"===l&&(l="tomorrow"),$(this).data("capitalise")===!0&&(l=l.charAt(0).toUpperCase()+l.slice(1)),$(this).text(l)})},t.initNiceTimeCalc=function(t){var i=0,e="",o=1,n=60*o,a=60*n,s=24*a,c=7*s,r=30*s,l=365*s;0>t&&(t=-1*t),n>t?(i=t,e="second"):a>t?(i=Math.floor(t/60),e="minute"):s>t?(i=Math.floor(t/60/60),e="hour"):c>t?(i=Math.floor(t/60/60/24),e="day"):r>t?(i=Math.floor(t/60/60/24/7),e="week"):l>t?(i=Math.floor(t/60/60/24/30),e="month"):(i=Math.floor(t/60/60/24/365),e="year");var d=1===i?"":"s";return i+" "+e+d},t.initSystemAlerts=function(){},t.error=function(t){window.console&&"PRODUCTION"!==window.ENVIRONMENT&&console.error(t)},t.__construct()};
//# sourceMappingURL=./nails.admin.min.js.map
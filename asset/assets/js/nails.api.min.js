var NAILS_API;NAILS_API=function(){return this._api_base=window.SITE_URL+"api/",this._csrf_cookie="nailscsrftoken",this._csrf_token="nailscsrftest",this.__construct=function(){$.cookie||this.warn("NAILS_API: Cookie plugin not available. CSRF may fail (if enabled).")},this.set_base=function(e){this._api_base=e},this.call=function(e,n,o,t,i,r,s){var c={};if("object"==typeof e){if(c=e,"undefined"==typeof c.controller)throw new Error("Controller not defined");if("undefined"==typeof c.method)throw new Error("Method not defined");"undefined"==typeof c.data&&(c.data={}),"undefined"==typeof c.success&&(c.success=function(){}),"undefined"==typeof c.error&&(c.error=function(){}),"undefined"==typeof c.action&&(c.action="GET"),"undefined"==typeof c.async&&(c.async=!0)}else c.controller="undefined"==typeof e?"":e,c.method="undefined"==typeof n?"":n,c.data="undefined"==typeof o?{}:o,c.success="undefined"==typeof t?function(){}:t,c.error="undefined"==typeof i?function(){}:i,c.action="undefined"==typeof r?"GET":r,c.async="undefined"==typeof s?!0:s;if("POST"===c.action&&$.cookie){var f=$.cookie(this._csrf_cookie);if("string"==typeof f&&f.length>0){var d={};d[this._csrf_token]=f,c.data=$.extend({},c.data,d)}}$.ajax({url:this._api_base+c.controller+"/"+c.method,data:c.data,dataType:"json",success:c.success,error:c.error,type:c.action,async:c.async})},this.error=function(e){window.console&&"production"!==window.ENVIRONMENT&&console.error(e)},this.warn=function(e){window.console&&"production"!==window.ENVIRONMENT&&console.warn(e)},this.__construct()};
var NAILS_Admin_CMS_Menus_Create_Edit;NAILS_Admin_CMS_Menus_Create_Edit=function(e){var t=this;return t.itemTemplate="",t.idLength=32,t.__construct=function(e){t.itemTemplate=$("#template-item").html(),$("div.nested-sortable").each(function(){var n,i,a,r;n=$(this),i=n.children("ol.nested-sortable").first();for(var l in e)console.log(e[l]),e[l].counter=$("li.target").length,a=Mustache.render(t.itemTemplate,e[l]),r=null!==e[l].parent_id&&""!==e[l].parent_id?$("li.target-"+e[l].parent_id+" ol.nested-sortable-sub").first():i,r.append(a),parseInt(e[l].page_id,10)>0&&r.find("li:last option[value="+e[l].page_id+"]").prop("selected",!0);i.nestedSortable({handle:"div.handle",items:"li",toleranceElement:"> div",stop:function(){t.updateOrders(i),t.updateParentIds(i)}}),n.find("a.add-item").on("click",function(){var e={id:t.generateId(),counter:$("li.target").length},n=Mustache.render(t.itemTemplate,e);return i.append(n),t.updateOrders(),!1})}),$(document).on("click","a.item-remove",function(){var e=$(this);return $("<div>").html('<p>This will remove this menu item (and any children) from the interface.</p><p>You will still need to "Save Changes" to commit the removal</p>').dialog({title:"Are you sure?",resizable:!1,draggable:!1,modal:!0,dialogClass:"no-close",buttons:{OK:function(){e.closest("li.target").remove(),$(this).dialog("close")},Cancel:function(){$(this).dialog("close")}}}).show(),!1})},t.updateOrders=function(e){var t=0;$("input.input-order",e).each(function(){$(this).val(t),t++})},t.updateParentIds=function(e){$("input.input-parent_id",e).each(function(){var e=$(this).closest("ol").closest("li").data("id");$(this).val(e)})},t.generateId=function(){var e,n;e="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789";do{n="newid-";for(var i=t.idLength;i>0;--i)n+=e[Math.round(Math.random()*(e.length-1))]}while($("li.target-"+n).length>0);return n},t.__construct(e)};
//# sourceMappingURL=./nails.admin.cms.menus.createEdit.min.js.map
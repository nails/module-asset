var NAILS_Admin_CMS_Pages_CreateEdit;NAILS_Admin_CMS_Pages_CreateEdit=function(e,t){var a=this;return a.editor=e,a.templates=t,a.activeTemplate="",a.activeArea="",a.__construct=function(){a.log("Constructing Pages Editor"),a.bindEvents(),a.editor.addAction("Preview","primary",function(){a.showPreview()}),$("body").append($("#page-preview")),$("#page-preview").css("zIndex",a.editor.container.css("zIndex")),$(".template.selected input").click()},a.bindEvents=function(){return $(".template input").on("click",function(){a.selectTemplate($(this).data("slug"))}),$("button.launch-editor").on("click",function(){var e=$(this).data("area");a.log('Launching editor for area "'+e+'"'),a.activeArea=e,a.editor.show(e)}),$(a.editor).on("widgeteditor-close",function(){var e,t={};a.log("Editor Closing, getting area data"),$("#template-area-"+a.activeTemplate+" .btn").each(function(){e=$(this).data("area"),t[e]=a.editor.getAreaData(e)}),$("#template-data").val(JSON.stringify(t)),a.activeArea=""}),$("#action-preview").on("click",function(){a.showPreview()}),$("#page-preview .action-close").on("click",function(){a.hidePreview()}),$("#page-preview .action-publish").on("click",function(){a.hidePreview(),$("#action-publish").click()}),a},a.selectTemplate=function(e){return a.log('Showing template "'+e+'"'),a.activeTemplate=e,$(".template").removeClass("selected"),$("#template-options-none").hide(),$(".additional-fields").hide(),$("#template-areas-none").hide(),$(".template-area").hide(),$(".template[data-slug="+e+"]").addClass("selected"),$("#additional-fields-"+e).show(),$("#template-area-"+e).show(),0===$(".additional-fields:visible").length&&$("#template-options-none").show(),0===$(".template-area:visible").length&&$("#template-areas-none").show(),a},a.showPreview=function(){return a.log("Generating preview"),$("body").addClass("noscroll"),$("#page-preview").addClass("loading").show(),$("#page-preview iframe").attr("src","http://hellopablo.co.uk"),a},a.hidePreview=function(){return a.log("Hiding preview"),$("#page-preview").hide().removeClass("loading").find("iframe").removeAttr("src"),$("body").removeClass("noscroll"),a},a.log=function(e,t){"function"==typeof console.log&&(void 0!==t?console.log("CMS Pages:",e,t):console.log("CMS Pages:",e))},a.warn=function(e,t){"function"==typeof console.warn&&(void 0!==t?console.warn("CMS Pages:",e,t):console.warn("CMS Pages:",e))},a.__construct()};
//# sourceMappingURL=nails.admin.cms.pages.createEdit.min.js.map

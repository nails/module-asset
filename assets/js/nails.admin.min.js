if("undefined"==typeof console){var console;console={log:function(){},debug:function(){},info:function(){},warn:function(){},error:function(){}}}var NAILS_Admin;NAILS_Admin=function(){var t=this;return t.__construct=function(){t.initBoxes(),t.initNavSearch(),t.initNavReset(),t.initSearchBoxes(),t.initMobileMenu(),t.initToggles(),t.initWysiwyg(),t.initSelect2(),t.initNiceTime(),t.initSystemAlerts(),$(window).on("resize",function(){t.initMatchHeights()}).trigger("resize")},t.localStorage={enabled:function(){var t,e,i=(new Date).toString();try{return(t=window.localStorage).setItem(i,i),e=t.getItem(i)===i,t.removeItem(i),!0}catch(n){return!1}}(),set:function(t,e){return!!this.enabled&&(e=JSON.stringify(e),window.localStorage.setItem(t,e))},get:function(t){if(this.enabled){var e=window.localStorage.getItem(t);return JSON.parse(e)}return!1},remove:function(t){return!!this.enabled&&window.localStorage.removeItem(t)}},t.initBoxes=function(){$(".box .toggle").on("click",function(){return $(this).parents(".box").hasClass("open")?t.closeBox(this,!0):t.openBox(this,!0),t.saveNav(),!1});var e,i,n,o;$("ul.modules li.module").each(function(){e=$(this).data("initial-state"),i=$(this).find(".toggle"),o=$(this).find(".box-container"),n=o.outerHeight(),i.attr("data-height",n),"open"===e?t.openBox(i,!1):t.closeBox(i,!1)}),$("ul.modules").sortable({axis:"y",placeholder:"sort-placeholder",items:"li.module.sortable",handle:".handle",start:function(t,e){e.placeholder.height(e.helper.outerHeight())},stop:function(){t.saveNav()}})},t.saveNav=function(){var t,e,i;t={},$("ul.modules li.module").each(function(){i=$(".box",this).hasClass("open"),t[$(this).data("grouping")]={open:i}}),e={controller:"admin/nav",method:"save",action:"POST",data:{preferences:t}},_nails_api.call(e)},t.openBox=function(t,e){var i,n;i=$(t).parents(".box").attr("id"),$(t).parents(".box").removeClass("closed"),$(t).parents(".box").addClass("open"),n=$(t).attr("data-height"),e?$(t).parents(".box").find(".box-container").stop().animate({height:n}):$(t).parents(".box").find(".box-container").height(n)},t.closeBox=function(t,e){var i;i=$(t).parents(".box").attr("id"),$(t).parents(".box").removeClass("open"),$(t).parents(".box").addClass("closed"),e?$(t).parents(".box").find(".box-container").stop().animate({height:0}):$(t).parents(".box").find(".box-container").height(0)},t.initNavSearch=function(){$(".nav-search input").on("keyup",function(){var e=$(this).val();e.length?($(".box .toggle").addClass("hidden"),$(".box li").removeClass("hidden").each(function(){var t=new RegExp(e,"gi"),i=$.trim($(this).text());t.test(i)?$(this).removeClass("hidden"):$(this).addClass("hidden")}),$(".box").each(function(){$(this).find("li:not(.hidden)").length?$(this).removeClass("hidden"):$(this).addClass("hidden");var t=$(this).find("ul").outerHeight();$(this).find(".box-container").height(t)})):($(".box").removeClass("hidden"),$(".box li").removeClass("hidden"),$(".box .toggle").removeClass("hidden").each(function(){$(this).closest(".box").hasClass("closed")?t.closeBox(this,!1):t.openBox(this,!1)}))})},t.initNavReset=function(){$("#admin-nav-reset-buttons a").on("click",function(){if("reset"===$(this).data("action")){var e={controller:"admin/nav",method:"reset",action:"POST"};_nails_api.call(e),$("<div>").html("<p>Your navigation has been reset, changes will take hold on the next page load.</p>").dialog({title:"Reset Complete",resizable:!1,draggable:!1,modal:!0,dialogClass:"no-close",buttons:{OK:function(){$(this).dialog("close")},Reload:function(){window.location.reload()}}}).show()}else"open"===$(this).data("action")?($("ul.modules li.module").each(function(){var e=$(this).find(".toggle");t.openBox(e,!1)}),t.saveNav()):"close"===$(this).data("action")&&($("ul.modules li.module").each(function(){var e=$(this).find(".toggle");t.closeBox(e,!1)}),t.saveNav());return!1})},t.initSearchBoxes=function(){var t;$("div.search select, div.search input[type=checkbox]").on("change",function(){var e=$(this).closest("form");clearTimeout(t),t=setTimeout(function(){e.submit()},500)}),$("div.search form").on("submit",function(){$(this).closest("div.search").find("div.mask").show()}),$("div.search .filterOption input[type=checkbox]").on("change",function(){$(this).is(":checked")?$(this).closest(".filterOption").addClass("checked"):$(this).closest(".filterOption").removeClass("checked")}),$("div.search .filterOption input[type=checkbox]").each(function(){$(this).is(":checked")?$(this).closest(".filterOption").addClass("checked"):$(this).closest(".filterOption").removeClass("checked")})},t.initMobileMenu=function(){$("#mobileMenuBurger").on("click",function(){var t=$(window).height()-150;return $("#mobileMenu").toggleClass("open"),$("#mobileMenu").hasClass("open")?$("#mobileMenu").css("max-height",t+"px"):$("#mobileMenu").css("max-height","0px"),!1})},t.initToggles=function(){$.fn.toggles?$(".field.boolean:not(.toggled)").each(function(){var t=$(this).find("input[type=checkbox]"),e=$(this).hasClass("readonly"),i=$(this).data("text-on")?$(this).data("text-on"):"ON",n=$(this).data("text-off")?$(this).data("text-off"):"OFF";$(this).find(".toggle").css({width:"100px",height:"30px"}).toggles({checkbox:t,click:!e,drag:!e,clicker:t,on:t.is(":checked"),text:{on:i,off:n}}),$(this).addClass("toggled"),t.hide()}):t.error("NAILS_ADMIN_JS: jQuery Toggles not available.")},t.basicConfig=window.NAILS.URL+"js/ckeditor.config.basic.min.js",t.defaultConfig=window.NAILS.URL+"js/ckeditor.config.default.min.js",t.initWysiwyg=function(){if($.fn.ckeditor){var e=window.SITE_URL+"assets/js/nails.admin.ckeditor.config.basic.min.js",i=window.SITE_URL+"assets/js/nails.admin.ckeditor.config.default.min.js";$.ajax({url:e,type:"HEAD",success:function(){t.basicConfig=e,t.buildWysiwyg("basic")},error:function(){t.buildWysiwyg("basic")}}),$.ajax({url:i,type:"HEAD",success:function(){t.defaultConfig=i,t.buildWysiwyg("default")},error:function(){t.buildWysiwyg("default")}})}else t.error("NAILS_ADMIN_JS: CKEditor not available.")},t.buildWysiwyg=function(e,i){return"basic"===e?$(".wysiwyg.wysiwyg-basic:not(.wysiwyged)",i).ckeditor({customConfig:t.basicConfig}).addClass("wysiwyged"):"default"===e&&$(".wysiwyg:not(.wysiwyged)",i).ckeditor({customConfig:t.defaultConfig}).addClass("wysiwyged"),t},t.destroyWysiwyg=function(e,i){return"basic"===e?$(".wysiwyg.wysiwyg-basic.wysiwyged",i).ckeditor(function(){this.destroy()}).removeClass("wysiwyged"):"default"===e&&$(".wysiwyg.wysiwyged",i).ckeditor(function(){this.destroy()}).removeClass("wysiwyged"),t},t.initSelect2=function(){$.fn.select2?$("select.select2:not(.select2-offscreen)").select2():this.error("NAILS_JS: Select2 not available.")},t.initNiceTime=function(){var e=$(".nice-time:not(.nice-timed)");e.each(function(){var t=$(this).text(),e=/^\d\d\d\d-\d\d?-\d\d?(\d\d?\:\d\d?\:\d\d?)?$/;if(e.test(t)){var i=t.split(" ");if(i[1]||(i[1]="00:00:00"),i[0]){var n=i[0].split("-"),o=i[1].split(":"),a=n[0],s=n[1],r=n[2],c=o[0],d=o[1],l=o[2],h=new Date(a,s,r,c,d,l);isNaN(h.getTime())||($(this).addClass("nice-timed"),$(this).attr("data-time",t),$(this).attr("data-year",a),$(this).attr("data-month",s),$(this).attr("data-day",r),$(this).attr("data-hour",c),$(this).attr("data-minute",d),$(this).attr("data-second",l),$(this).attr("title",t))}}}),$(".nice-timed").each(function(){var e=$(this).attr("data-year"),i=$(this).attr("data-month")-1,n=$(this).attr("data-day"),o=$(this).attr("data-hour"),a=$(this).attr("data-minute"),s=$(this).attr("data-second"),r=new Date(e,i,n,o,a,s),c=new Date,d="",l=Math.ceil((c.getTime()-r.getTime())/1e3);l>=0&&l<10?d="a moment ago":l>=10?d=t.initNiceTimeCalc(l)+" ago":l<0&&(d=t.initNiceTimeCalc(l)+" from now"),"1 day ago"===d?d="yesterday":"1 day from now"===d&&(d="tomorrow"),$(this).data("capitalise")===!0&&(d=d.charAt(0).toUpperCase()+d.slice(1)),$(this).text(d)})},t.initNiceTimeCalc=function(t){var e=0,i="",n=1,o=60*n,a=60*o,s=24*a,r=7*s,c=30*s,d=365*s;t<0&&(t*=-1),t<o?(e=t,i="second"):t<a?(e=Math.floor(t/60),i="minute"):t<s?(e=Math.floor(t/60/60),i="hour"):t<r?(e=Math.floor(t/60/60/24),i="day"):t<c?(e=Math.floor(t/60/60/24/7),i="week"):t<d?(e=Math.floor(t/60/60/24/30),i="month"):(e=Math.floor(t/60/60/24/365),i="year");var l=1===e?"":"s";return e+" "+i+l},t.initSystemAlerts=function(){},t.error=function(t){window.console&&"PRODUCTION"!==window.ENVIRONMENT&&console.error(t)},t.numberFormat=function(t,e,i,n){t=(t+"").replace(/[^0-9+\-Ee.]/g,"");var o=isFinite(+t)?+t:0,a=isFinite(+e)?Math.abs(e):0,s="undefined"==typeof n?",":n,r="undefined"==typeof i?".":i,c="",d=function(t,e){var i=Math.pow(10,e);return""+(Math.round(t*i)/i).toFixed(e)};return c=(a?d(o,a):""+Math.round(o)).split("."),c[0].length>3&&(c[0]=c[0].replace(/\B(?=(?:\d{3})+(?!\d))/g,s)),(c[1]||"").length<a&&(c[1]=c[1]||"",c[1]+=new Array(a-c[1].length+1).join("0")),c.join(r)},t.initMatchHeights=function(){var t,e,i;t={},e=$(".match-height"),e.each(function(){$(this).height(""),i=$(this).data("height-group")||"default",void 0===t[i]&&(t[i]=0),$(this).height()>t[i]&&(t[i]=$(this).height())}),e.each(function(){i=$(this).data("height-group")||"default",$(this).height(t[i])})},t.__construct()};
//# sourceMappingURL=nails.admin.min.js.map

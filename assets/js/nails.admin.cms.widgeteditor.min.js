var NAILS_Admin_CMS_WidgetEditor;NAILS_Admin_CMS_WidgetEditor=function(){var e=this;return e.widgets=[],e.actions=[{label:"Preview",type:"primary"},{label:'<i class="fa fa-lg fa-times"></i>',type:"danger",callback:function(){e.hide()}}],e.widgetData={},e.container=null,e.sections=null,e.__construct=function(){return e.log("Constructing Widget Editor"),e.generateMarkup(),e.bindEvents(),e.loadWidgets(),e.show(),e},e.generateMarkup=function(){var i;return null===e.container?(e.log("Injecting editor markup"),e.container=$("<div>").addClass("group-cms widgeteditor"),e.sections={header:$("<div>").addClass("widgeteditor-header").text("Some header text, maybe"),actions:$("<div>").addClass("widgeteditor-actions"),search:$("<div>").addClass("widgeteditor-search"),widgets:$("<div>").addClass("widgeteditor-widgets"),body:$("<ul>").addClass("widgeteditor-body").html("<li><fieldset><legend>A Widget</legend><p>Some shiz</p></fieldset></li><li><fieldset><legend>A Widget</legend><p>Some shiz</p></fieldset></li><li><fieldset><legend>A Widget</legend><p>Some shiz</p></fieldset></li><li><fieldset><legend>A Widget</legend><p>Some shiz</p></fieldset></li><li><fieldset><legend>A Widget</legend><p>Some shiz</p></fieldset></li><li><fieldset><legend>A Widget</legend><p>Some shiz</p></fieldset></li><li><fieldset><legend>A Widget</legend><p>Some shiz</p></fieldset></li><li><fieldset><legend>A Widget</legend><p>Some shiz</p></fieldset></li><li><fieldset><legend>A Widget</legend><p>Some shiz</p></fieldset></li><li><fieldset><legend>A Widget</legend><p>Some shiz</p></fieldset></li><li><fieldset><legend>A Widget</legend><p>Some shiz</p></fieldset></li><li><fieldset><legend>A Widget</legend><p>Some shiz</p></fieldset></li><li><fieldset><legend>A Widget</legend><p>Some shiz</p></fieldset></li><li><fieldset><legend>A Widget</legend><p>Some shiz</p></fieldset></li>")},i=$("<input>").attr("type","search").attr("placeholder","Search widgets"),e.sections.search.append(i),e.container.append(e.sections.header).append(e.sections.actions).append(e.sections.search).append(e.sections.widgets).append(e.sections.body),$("body").append(e.container),e.renderWidgets(),e.renderActions()):e.warn("Editor already generated"),e},e.bindEvents=function(){e.sections.actions.on("click",".action",function(){var i=$(this).data("action-index")||null;return null!==i&&e.actions[i]&&"function"==typeof e.actions[i].callback&&e.actions[i].callback.call(e),!1})},e.loadWidgets=function(){var i;return e.log("Fetching available CMS widgets"),i=$.Deferred(),e.widgets=[{label:"Grouping 1",widgets:[{label:"Image",icon:"fa-picture-o"},{label:"Table",icon:"fa-search"},{label:"Widget 2",icon:"fa-adjust"}]}],i.done(function(){e.renderWidgets()}),i.resolve(),i},e.renderWidgets=function(){e.sections.widgets.empty();for(var i=0;i<e.widgets.length;i++){label=$("<span>").addClass("label").text(e.widgets[i].label),toggle=$("<i>").addClass("icon fa fa-chevron-down"),container=$("<div>").addClass("widget-group").data("group",i).append(label).append(toggle),e.sections.widgets.append(container);for(var t=0;t<e.widgets[i].widgets.length;t++)icon=$("<i>").addClass("icon fa "+e.widgets[i].widgets[t].icon),label=$("<span>").addClass("label").text(e.widgets[i].widgets[t].label),container=$("<div>").addClass("widget widget-group-"+i).append(icon).append(label),e.sections.widgets.append(container)}return e},e.addAction=function(i,t,d){return e.log('Adding action "'+i+'"'),e.actions.push({label:i,type:t,callback:d}),e.renderActions(),e},e.removeAction=function(i){return e.log('Removing action "'+i+'"'),e.renderActions(),e},e.renderActions=function(){var i;e.sections.actions.empty();for(var t=0;t<e.actions.length;t++)i=$("<a>").addClass("action btn btn-sm btn-"+e.actions[t].type).data("action-index",t).html(e.actions[t].label),e.sections.actions.append(i);return e},e.show=function(i){return i=i||"default",e.log('Showing Editor for "'+i+'"'),e.container.addClass("active"),e},e.hide=function(){return e.log("Hiding Editor"),e.container.removeClass("active"),e},e.log=function(e,i){"function"==typeof console.log&&(void 0!==i?console.log("CMS Widget Editor:",e,i):console.log("CMS Widget Editor:",e))},e.warn=function(e,i){"function"==typeof console.warn&&(void 0!==i?console.warn("CMS Widget Editor:",e,i):console.warn("CMS Widget Editor:",e))},e.__construct()};
//# sourceMappingURL=nails.admin.cms.widgeteditor.min.js.map
